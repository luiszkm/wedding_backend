# Testes de Convidados - Wedding API

### Variáveis
@baseUrl = http://localhost:3000/v1
@authToken = {{authToken}}
@eventoId = {{eventoId}}

###

# Criar grupo de convidados
POST {{baseUrl}}/eventos/{{eventoId}}/grupos-de-convidados
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
  "chaveDeAcesso": "padrinhos123",
  "nomesDosConvidados": [
    "Carlos Silva",
    "Ana Santos"
  ]
}

> {%
  client.global.set("chaveAcesso", "padrinhos123");
  client.global.set("grupoId", response.body.idGrupo);
%}

###

# Criar outro grupo de convidados
POST {{baseUrl}}/eventos/{{eventoId}}/grupos-de-convidados
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
  "chaveDeAcesso": "familia456",
  "nomesDosConvidados": [
    "Roberto Silva",
    "Maria Silva",
    "Pedro Silva"
  ]
}

> {%
  client.global.set("chaveAcesso2", "familia456");
%}

###

# Obter grupo por chave de acesso
GET {{baseUrl}}/acesso-convidado?chave={{chaveAcesso}}
Authorization: Bearer {{authToken}}

###

# Confirmar presença (RSVP)
POST {{baseUrl}}/rsvps
Content-Type: application/json

{
  "chaveDeAcesso": "{{chaveAcesso}}",
  "respostas": [
    {
      "idConvidado": "{{convidado1Id}}",
      "status": "CONFIRMADO"
    },
    {
      "idConvidado": "{{convidado2Id}}", 
      "status": "CONFIRMADO"
    }
  ]
}

###

# Revisar grupo de convidados
PUT {{baseUrl}}/grupos-de-convidados/{{grupoId}}
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
  "chaveDeAcesso": "padrinhos-atualizados",
  "convidados": [
    {
      "id": "{{convidado1Id}}",
      "nome": "Carlos Silva Santos"
    },
    {
      "nome": "Pedro Novo Convidado"
    }
  ]
}

###

# Listar grupos de um evento
GET {{baseUrl}}/eventos/{{eventoId}}/grupos-de-convidados
Authorization: Bearer {{authToken}}

###

# Listar grupos com filtro por status
GET {{baseUrl}}/eventos/{{eventoId}}/grupos-de-convidados?status=CONFIRMADO
Authorization: Bearer {{authToken}}

###

# Obter grupo específico por ID (admin)
GET {{baseUrl}}/grupos-de-convidados/{{grupoId}}
Authorization: Bearer {{authToken}}

###

# Obter estatísticas de RSVP do evento
GET {{baseUrl}}/eventos/{{eventoId}}/rsvp-stats
Authorization: Bearer {{authToken}}

###

# Remover grupo (somente se todos os convidados estão pendentes)
DELETE {{baseUrl}}/grupos-de-convidados/{{grupoId}}
Authorization: Bearer {{authToken}}