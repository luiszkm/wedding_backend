ADR-005: Criação do Contexto de Roteiro para o Módulo de Itinerário do Evento
Status: Aceito

Data: 2025-08-06

1. Contexto (Context)
A plataforma atual fornece informações estáticas sobre o evento, como data e local, mas carece de uma forma estruturada para os anfitriões comunicarem a programação detalhada do dia. Convidados frequentemente têm dúvidas sobre os horários de atividades específicas (início da cerimônia, coquetel, jantar, festa), o que leva a uma comunicação fragmentada por canais externos.

Para fortalecer a plataforma como o hub central de informações do evento e melhorar a experiência do convidado, é necessária uma funcionalidade que permita a criação e visualização de um cronograma ou roteiro do evento. A decisão arquitetural é como implementar esta feature de forma coesa e com o mínimo de impacto na arquitetura existente.

2. Decisão (Decision)
Decidimos projetar e implementar a funcionalidade de "Roteiro do Evento" como um novo e independente Contexto Delimitado: o Contexto de Roteiro (Itinerary Context).

O plano de implementação para este novo contexto é:

Novo Contexto Delimitado: A lógica e os dados relacionados ao cronograma do evento serão encapsulados em seu próprio módulo de código. A responsabilidade deste contexto é única e clara: gerenciar a sequência de atividades agendadas para um evento.

Novo Esquema de Banco de Dados: Uma nova tabela será introduzida para armazenar os itens do roteiro.

SQL

CREATE TABLE itens_roteiro (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    id_evento UUID NOT NULL,
    horario TIMESTAMP WITH TIME ZONE NOT NULL,
    titulo_atividade VARCHAR(255) NOT NULL,
    descricao_atividade TEXT,

    -- Garante a relação com o evento ao qual o roteiro pertence
    CONSTRAINT fk_evento_roteiro
        FOREIGN KEY(id_evento) 
        REFERENCES eventos(id)
        ON DELETE CASCADE
);
Novos Endpoints na API: A API será estendida com endpoints CRUD para a gestão do roteiro.

Leitura (para Convidados e Anfitriões):

GET /eventos/{idEvento}/roteiro - Retorna uma lista de todos os itens do roteiro para um evento, ordenados por horario.

Escrita (para Anfitriões - Autenticado):

POST /eventos/{idEvento}/roteiro - Adiciona um novo item ao roteiro.

PUT /roteiro/{idItemRoteiro} - Edita um item existente do roteiro.

DELETE /roteiro/{idItemRoteiro} - Remove um item do roteiro.

3. Consequências (Consequences)
Positivas:

Alto Valor para o Usuário: Resolve uma necessidade clara tanto para os anfitriões (ferramenta de organização) quanto para os convidados (clareza sobre a programação), melhorando significativamente a utilidade da página do evento.

Baixo Acoplamento e Alta Coesão: A implementação como um novo contexto isolado garante que a nova funcionalidade não introduza complexidade ou dependências indesejadas nos outros módulos do sistema.

Manutenibilidade: Sendo um módulo autocontido, é simples de desenvolver, testar e modificar no futuro sem risco de impactar outras funcionalidades.

Baixa Complexidade Técnica: A lógica de negócio é primariamente de CRUD (Create, Read, Update, Delete), tornando esta uma feature de baixo risco e esforço de implementação moderado.

Negativas:

Aumento da Superfície do Sistema: Inerente à adição de qualquer nova feature, o sistema cresce com uma nova tabela e novos endpoints na API, o que aumenta ligeiramente sua área total. Este é um trade-off aceitável para o valor entregue.

Escopo da V1: A implementação descrita foca na exibição do roteiro. Não inclui funcionalidades avançadas como notificações de "push" para os convidados 15 minutos antes de uma atividade começar, o que seria uma evolução futura deste contexto e exigiria uma infraestrutura mais complexa.

